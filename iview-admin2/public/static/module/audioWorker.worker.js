!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n={log:function(){},error:function(){},count:function(){},info:function(){}};(function(){function t(){}t.createFromElementId=function(e){for(var r=document.getElementById(e),n="",a=r.firstChild;a;)3===a.nodeType&&(n+=a.textContent),a=a.nextSibling;var o=new t;return o.type=r.type,o.source=n,o},t.createFromSource=function(e,r){var n=new t;return n.type=e,n.source=r,n}})(),function(){function t(t){this.gl=t,this.program=this.gl.createProgram()}t.prototype={attach:function(t){this.gl.attachShader(this.program,t.shader)},link:function(){this.gl.linkProgram(this.program)},use:function(){this.gl.useProgram(this.program)},getAttributeLocation:function(t){return this.gl.getAttribLocation(this.program,t)},setMatrixUniform:function(t,e){var r=this.gl.getUniformLocation(this.program,t);this.gl.uniformMatrix4fv(r,!1,e)}}}(),function(){var t=null;function e(t,e,r){this.gl=t,this.size=e,this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),this.format=r||t.LUMINANCE,t.texImage2D(t.TEXTURE_2D,0,this.format,e.w,e.h,0,this.format,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}e.prototype={fill:function(t,e){var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),e?r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.size.w,this.size.h,this.format,r.UNSIGNED_BYTE,t):r.texImage2D(r.TEXTURE_2D,0,this.format,this.size.w,this.size.h,0,this.format,r.UNSIGNED_BYTE,t)},bind:function(e,r,n){var a=this.gl;t||(t=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2]),a.activeTexture(t[e]),a.bindTexture(a.TEXTURE_2D,this.texture),a.uniform1i(a.getUniformLocation(r.program,n),e)}}}();function a(){var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384],e=function(t,e,r){var n=0,a=0;for(n=0;n<r&&!(t<e[a]);n++)a++;return n},r=function(r,n){var a,o,i,s,u;return i=(o=e(a=r>0?r:8191&-r,t,15)-6)+(n>>6&15)-13,s=(0===a?32:o>=0?a>>o:a<<-o)*(n&parseInt("077",8))+48>>4,u=i>=0?s<<i&32767:s>>-i,(r^n)<0?-u:u};this.g726InitState=function(){var t={},e=0;for(t.pp=new Array(2),t.zp=new Array(6),t.pk=new Array(2),t.dq=new Array(6),t.sr=new Array(2),t.yl=34816,t.yu=544,t.dms=0,t.dml=0,t.ppp=0,e=0;e<2;e++)t.pp[e]=0,t.pk[e]=0,t.sr[e]=32;for(e=0;e<6;e++)t.zp[e]=0,t.dq[e]=32;return t.td=0,t},this.predictorZero=function(t){var e=0,n=0;for(n=r(t.zp[0]>>2,t.dq[0]),e=1;e<6;e++)n+=r(t.zp[e]>>2,t.dq[e]);return n},this.predictorPole=function(t){return r(t.pp[1]>>2,t.sr[1])+r(t.pp[0]>>2,t.sr[0])},this.stepSize=function(t){var e=0,r=0,n=0;return t.ppp>=256?t.yu:(e=t.yl>>6,r=t.yu-e,n=t.ppp>>2,r>0?e+=r*n>>6:r<0&&(e+=r*n+63>>6),e)},this.quantize=function(r,n,a,o){var i,s,u;return i=Math.abs(r),s=e(i>>1,t,15),u=e((s<<7)+(i<<7>>s&127)-(n>>2),a,o),r<0?1+(o<<1)-u:0===u?1+(o<<1):u},this.reconstruct=function(t,e,r){var n,a=0;return(n=e+(r>>2))<0?t?-32768:0:(a=128+(127&n)<<7>>14-(n>>7&15),t?a-32768:a)},this.update=function(r,n,a,o,i,s,u,c){var l,f,p,d,h,g=0,m=0,v=0,T=0,y=0,w=0,E=0,b=0;if(h=u<0?1:0,m=32767&i,l=c.yl>>15,d=c.yl>>10&31,p=(f=l>9?31744:32+d<<l)+(f>>1)>>1,b=0===c.td||m<=p?0:1,c.yu=n+(a-n>>5),c.yu<544?c.yu=544:c.yu>5120&&(c.yu=5120),c.yl+=c.yu+(-c.yl>>6),1===b)c.pp[0]=0,c.pp[1]=0,c.zp[0]=0,c.zp[1]=0,c.zp[2]=0,c.zp[3]=0,c.zp[4]=0,c.zp[5]=0,T=0;else for(w=h^c.pk[0],T=c.pp[1]-(c.pp[1]>>7),0!==u&&((E=w?c.pp[0]:-c.pp[0])<-8191?T-=256:T+=E>8191?255:E>>5,h^c.pk[1]?T<=-12160?T=-12288:T>=12416?T=12288:T-=128:T<=-12416?T=-12288:T>=12160?T=12288:T+=128),c.pp[1]=T,c.pp[0]-=c.pp[0]>>8,0!==u&&(0===w?c.pp[0]+=192:c.pp[0]-=192),y=15360-T,c.pp[0]<-y?c.pp[0]=-y:c.pp[0]>y&&(c.pp[0]=y),g=0;g<6;g++)c.zp[g]-=5===r?c.zp[g]>>9:c.zp[g]>>8,32767&i&&((i^c.dq[g])>=0?c.zp[g]+=128:c.zp[g]-=128);for(g=5;g>0;g--)c.dq[g]=c.dq[g-1];return 0===m?c.dq[0]=i>=0?32:64544:(v=e(m,t,15),c.dq[0]=i>=0?(v<<6)+(m<<6>>v):(v<<6)+(m<<6>>v)-1024),c.sr[1]=c.sr[0],0===s?c.sr[0]=32:s>0?(v=e(s,t,15),c.sr[0]=(v<<6)+(s<<6>>v)):s>-32768?(v=e(m=-s,t,15),c.sr[0]=(v<<6)+(m<<6>>v)-1024):c.sr[0]=64544,c.pk[1]=c.pk[0],c.pk[0]=h,c.td=1===b?0:T<-11776?1:0,c.dms+=o-c.dms>>5,c.dml+=(o<<2)-c.dml>>7,1===b?c.ppp=256:n<1536||1===c.td||Math.abs((c.dms<<2)-c.dml)>=c.dml>>3?c.ppp+=512-c.ppp>>4:c.ppp+=-c.ppp>>4,c}}function o(){var t=[116,365,365,116],e=[-704,14048,14048,-704],r=[0,3584,3584,0],n={},o=null;function i(a,i){var s,u,c,l,f,p,d,h=a,g=i;switch(h=h&=3,u=(s=o.predictorZero(n))>>1,c=s+o.predictorPole(n)>>1,l=o.stepSize(n),d=(p=(f=o.reconstruct(2&h,t[h],l))<0?c-(16383&f):c+f)-c+u,n=o.update(2,l,e[h],r[h],f,p,d,n),g){case 3:return p<<2;default:return-1}}function s(){o=new a,n=o.g726InitState()}return s.prototype={decode:function(t){for(var e=new Int16Array(4*t.length),r=0,n=0;r<t.length;r++){var a=null;a=i(t[r]>>6,3),e[n]=65280&a,n++,a=i(t[r]>>4,3),e[n]=65280&a,n++,a=i(t[r]>>2,3),e[n]=65280&a,n++,a=i(t[r],3),e[n]=65280&a,n++}return e}},new s}function i(){var t=[-2048,135,273,373,373,273,135,-2048],e=[-128,960,4384,18624,18624,4384,960,-128],r=[0,512,1024,3584,3584,1024,512,0],n={},o=null;function i(a,i){var s,u,c,l,f,p,d,h=a,g=i;switch(h&=7,u=(s=o.predictorZero(n))>>1,c=s+o.predictorPole(n)>>1,l=o.stepSize(n),d=(p=(f=o.reconstruct(4&h,t[h],l))<0?c-(16383&f):c+f)-c+u,n=o.update(3,l,e[h],r[h],f,p,d,n),g){case 3:return p<<2;default:return-1}}function s(){o=new a,n=o.g726InitState()}return s.prototype={decode:function(t){for(var e=new Int16Array(8*t.length/3),r=0,n=0;r<t.length-3;r+=3){var a=null;a=i(t[r]>>5,3),e[n]=65280&a,n++,a=i(t[r]>>2,3),e[n]=65280&a,n++,a=i(t[r]<<1|t[r+1]>>7,3),e[n]=65280&a,n++,a=i(t[r+1]>>4,3),e[n]=65280&a,n++,a=i(t[r+1]>>1,3),e[n]=65280&a,n++,a=i(t[r+1]<<2|t[r+2]>>6,3),e[n]=65280&a,n++,a=i(t[r+2]>>3,3),e[n]=65280&a,n++,a=i(t[r+2]>>0,3),e[n]=65280&a,n++}return e}},new s}function s(){var t=[-2048,4,135,213,273,323,373,425,425,373,323,273,213,135,4,-2048],e=[-12,18,41,64,112,198,355,1122,1122,355,198,112,64,41,18,-12],r=[0,0,0,512,512,512,1536,3584,3584,1536,512,512,512,0,0,0],n={},o=null;function i(a,i){var s,u,c,l,f,p,d,h=0,g=a,m=i;switch(g&=15,u=(s=o.predictorZero(n))>>1,c=s+o.predictorPole(n)>>1,l=o.stepSize(n),d=(p=(f=o.reconstruct(8&g,t[g],l))<0?c-(16383&f):c+f)-c+u,n=o.update(4,l,e[g]<<5,r[g],f,p,d,n),m){case 3:return h=(h=(h=p<<2)>32767?32767:h)<-32768?-32768:h;default:return-1}}function s(){o=new a,n=o.g726InitState()}return s.prototype={decode:function(t){for(var e=new Int16Array(2*t.length),r=0,n=0;r<t.length;r++){var a=null;a=i((240&t[r])>>4,3),e[n]=65280&a,n++,a=i(15&t[r],3),e[n]=65280&a,n++}return e}},new s}function u(){var t=[-2048,-66,28,104,169,224,274,318,358,395,429,459,488,514,539,566,566,539,514,488,459,429,395,358,318,274,224,169,104,28,-66,-2048],e=[448,448,768,1248,1280,1312,1856,3200,4512,5728,7008,8960,11456,14080,16928,22272,22272,16928,14080,11456,8960,7008,5728,4512,3200,1856,1312,1280,1248,768,448,448],r=[0,0,0,0,0,512,512,512,512,512,1024,1536,2048,2560,3072,3072,3072,3072,2560,2048,1536,1024,512,512,512,512,512,0,0,0,0,0],n={},o=null;function i(a,i){var s,u,c,l,f,p,d,h=a,g=i;switch(h&=31,u=(s=o.predictorZero(n))>>1,c=s+o.predictorPole(n)>>1,l=o.stepSize(n),d=(f=(p=o.reconstruct(16&h,t[h],l))<0?c-(32767&p):c+p)-c+u,n=o.update(5,l,e[h],r[h],p,f,d,n),g){case 3:return f<<2;default:return-1}}function s(){o=new a,n=o.g726InitState()}return s.prototype={decode:function(t){for(var e=new Int16Array(1.6*t.length),r=0,n=0;r<t.length-5;r+=5){var a=null;a=i(t[r]>>3,3),e[n]=65280&a,n++,a=i(t[r]<<2|t[r+1]>>6,3),e[n]=65280&a,n++,a=i(t[r+1]>>1,3),e[n]=65280&a,n++,a=i(t[r+1]<<4|t[r+2]>>4,3),e[n]=65280&a,n++,a=i(t[r+2]<<1|t[r+3]>>7,3),e[n]=65280&a,n++,a=i(t[r+3]>>2,3),e[n]=65280&a,n++,a=i(t[r+3]<<3|t[r+4]>>5,3),e[n]=65280&a,n++,a=i(t[r+4]>>0,3),e[n]=65280&a,n++}return e}},new s}var c=function(t){var e=null;switch(t){case 16:e=new o;break;case 24:e=new i;break;case 32:e=new s;break;case 40:e=new u;break;default:debug.log("wrong bits")}return e},l=function(t){var e=0,r=null,a=t,o={seconds:null,useconds:null};function i(){r=new c(a),this.firstTime=0,this.lastMSW=0}return i.prototype={parseRTPData:function(t,n,i,s){var u=n[22],c=n.subarray(24+u,n.length-8);(n[21]<<8)+n[20];var l=(n[19]<<24)+(n[18]<<16)+(n[17]<<8)+n[16]>>>0,f=Date.UTC("20"+(l>>>26),(l>>>22&15)-1,l>>>17&31,l>>>12&31,l>>>6&63,63&l)/1e3;if(f-=28800,0==this.firstTime)this.firstTime=f,this.lastMSW=0,e=(n[21]<<8)+n[20],o.seconds=f,o.useconds=0;else{var p,d=(n[21]<<8)+n[20];p=d>e?d-e:d+65535-e,this.lastMSW+=p,f>this.firstTime&&(this.lastMSW-=1e3),this.firstTime=f,o.seconds=f,o.useconds=this.lastMSW,e=d}for(var h=r.decode(c),g=new Float32Array(h.length),m=0;m<h.length;m++)g[m]=h[m]/Math.pow(2,15);var v={codec:"G726",bufferData:g,rtpTimeStamp:1e3*o.seconds+o.useconds};return!0===i&&(v.bitrate=a,v.streamData=c),v},setCodecInfo:function(t){n.log("Set codec info. for G726")}},new i};var f=function(t){function e(t){var e,r=0;switch(r=(15&(t^=85))<<4,e=(112&t)>>4){case 0:r+=8;break;case 1:r+=264;break;default:r+=264,r<<=e-1}return 128&t?r:-r}function r(){}return r.prototype={decode:function(r){var n,a,o,i=new Uint8Array(r),s=new Int16Array(i.length),u=0;if("G.711A"==t)for(u=0;u<i.length;u++)s[u]=e(i[u]);else if("G.711Mu"==t)for(u=0;u<i.length;u++)s[u]=(n=i[u],a=void 0,o=void 0,a=0,a=132+((15&(o=~n))<<3),a<<=(112&o)>>4,128&o?132-a:a-132);var c=new Float32Array(s.length);for(u=0;u<s.length;u++)c[u]=s[u]/Math.pow(2,15);return c}},new r},p=function(t){var e=null,r=null,a=0,o={seconds:null,useconds:null};function i(){e=new f(t),this.firstTime=0,this.lastMSW=0}return i.prototype={parseRTPData:function(t,n,i,s){var u=n[22],c=n.subarray(24+u,n.length-8);(n[21]<<8)+n[20];var l=(n[19]<<24)+(n[18]<<16)+(n[17]<<8)+n[16]>>>0,f=Date.UTC("20"+(l>>>26),(l>>>22&15)-1,l>>>17&31,l>>>12&31,l>>>6&63,63&l)/1e3;if(f-=28800,0==this.firstTime)this.firstTime=f,this.lastMSW=0,a=(n[21]<<8)+n[20],o.seconds=f,o.useconds=0;else{var p,d=(n[21]<<8)+n[20];p=d>a?d-a:d+65535-a,this.lastMSW+=p,f>this.firstTime&&(this.lastMSW-=1e3),this.firstTime=f,o.seconds=f,o.useconds=this.lastMSW,a=d}var h={codec:"G711",bufferData:e.decode(c),rtpTimeStamp:1e3*o.seconds+o.useconds,samplingRate:r};return!0===i&&(h.streamData=c),h},setCodecInfo:function(t){n.log("Set codec info. for G711"),r=t.ClockFreq-0}},new i},d=function(){var t=null,e=null,r=null,a=0,o=new Uint8Array(7),i={seconds:null,useconds:null};function s(){this.firstTime=0,this.lastMSW=0}return s.prototype={parseRTPData:function(e,r,s,u){var c=r[22];(r[21]<<8)+r[20];var l=r.length-8-(24+c),f=r.subarray(24+c,r.length-8),p=f.subarray(0,2),d={},h=(r[19]<<24)+(r[18]<<16)+(r[17]<<8)+r[16]>>>0,g=Date.UTC("20"+(h>>>26),(h>>>22&15)-1,h>>>17&31,h>>>12&31,h>>>6&63,63&h)/1e3;if(g-=28800,0==this.firstTime)this.firstTime=g,this.lastMSW=0,a=(r[21]<<8)+r[20],i.seconds=g,i.useconds=0;else{var m,v=(r[21]<<8)+r[20];m=v>a?v-a:v+65535-a,this.lastMSW+=m,g>this.firstTime&&(this.lastMSW-=1e3),this.firstTime=g,i.seconds=g,i.useconds=this.lastMSW,a=v}255===p[0]&&240==(240&p[1])?(d={codec:"AAC",bufferData:f,rtpTimeStamp:1e3*i.seconds+i.useconds},!0===s&&(d.streamData=f.subarray(7,f.length))):(d={codec:"AAC",bufferData:function(e,r){var a=null;if("string"==typeof t){var i=(a=parseInt(t.substring(0,2),16))>>3,s=(7&a)<<1|(128&parseInt(t.substring(2,4),16))>>7;o[0]=255,o[1]=249,o[2]=i-1<<6,o[2]|=s<<2,o[2]|=0,o[3]=64,o[3]|=(e+7&6144)>>11,o[4]=(e+7&2040)>>3,o[5]=(e+7&7)<<5,o[5]|=1,o[6]=84;var u=new Uint8Array(o.length+r.length);return u.set(o,0),u.set(r,o.length),u}n.log("wrong type of config in SDP")}(l,f),rtpTimeStamp:1e3*i.seconds+i.useconds},!0===s&&(d.streamData=f));return d},setCodecInfo:function(a){n.log("Set codec info. for AAC"),t=a.config,r=a.bitrate,e=a.clockFreq},getCodecInfo:function(){return{bitrate:r,clockFreq:e}}},new s};addEventListener("message",(function(t){var e=t.data;switch(e.type){case"sdpInfo":g=e.data.sdpInfo;var r=e.data.aacCodecInfo;!function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t,o=0;o<t.length;o++)if(-1===a[o].trackID.search("trackID=t")){switch(m=null,r?r.AudioCodec:a[o].codecName){case"G.711A":case"G.711Mu":(m=new p(a[o].codecName)).setCodecInfo(a[o]);break;case"G.726-16":case"G.726-24":case"G.726-32":case"G.726-40":var i=parseInt(a[o].codecName.substr(6,2));n.log(i),m=new l(i);break;case"mpeg4-generic":m=new d,n.log("aacCodecInfo:  "+JSON.stringify(e)),m.setCodecInfo(e)}var s=a[o].RtpInterlevedID;if(h[s]=m,null!=m)return}}(g,r,e.data.mp4Codec);break;case"MediaData":var a=e.data.rtspInterleave[1];if(void 0!==h[a]){var o=e.data,i=h[a].parseRTPData(o.rtspInterleave,o.payload,!1,e.info);null!=i&&null!==i.streamData&&void 0!==i.streamData&&(i.streamData=null),v("render",i)}}}),!1),v("WorkerReady",{});var h=[],g=null,m=null;function v(t,e){var r={type:t,codec:e.codec,data:e.bufferData,rtpTimeStamp:e.rtpTimeStamp,samplingRate:e.samplingRate||8e3};if("render"===t)postMessage(r,[e.bufferData.buffer]);else if("backup"===t){postMessage({type:t,data:e})}else postMessage(r)}}]);